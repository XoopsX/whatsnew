====  pico の whatsnewモジュール用プラグイン  ===

はっぴぃ・りなっくす さんが配布されている WhatsNewモジュールを利用して、GIJOE さん作の静的コンテンツ用モジュール pico で作成したコンテンツの新着情報を表示するためのプラグインです。

解凍すると "html/modules/whatsnew/plugins/pico/" というディレクトリが展開され、このディレクトリの中にプラグインがあります。

pico を「pico」以外のディレクトリにインストールしている場合は、プラグインのディレクトリ名を変更してください。

【インストール例】
例えば pico1 と pico2 という２つの pico を使用している場合、

modules/whatsnew/plugins/pico1/
modules/whatsnew/plugins/pico2/

というようにすれば、２つの pico の新着情報を表示させることができます。

【プラグインの選択】
利用状況に合わせて、２種類のプラグインを選択できるようになっています。WhatsNewモジュールの「モジュール設定」で、使用するプラグインを選択してご利用ください。

１　pico v1.70
　　通常は、このプラグインを選択してください。

２　pico v1.70 with permission option
　　whatsnew 2.40 で、「アクセス権限のないモジュールの表示」を設定している場合は、pico の設定に関わらず、ゲストにユーザーと同等の情報を表示させるように機能を追加したプラグインです。
　　「アクセス権限のないモジュールの表示」を設定していても、管理者グループにのみ閲覧権限があるコンテンツの情報は表示されません。

【このプラグインの仕様等】
※pico の一般設定で、wrapsモードやmod_rewriteモードを有効に設定している場合は、その設定が反映されます。
※カテゴリの閲覧権限のチェックをしたうえで、新着情報ブロックに表示されます。
※ページラップ機能を利用して作成したコンテンツにも対応しています。
※オプションで、ブロックに表示するカテゴリーを設定することができます。


【ページラップの場合の注意事項】
picoのページラップ機能を利用したコンテンツは、本文キャッシュを有効に設定している場合に限り、コンテンツの内容を表示することができます(本文キャッシュが無効の場合、タイトルのみ表示)

また、RSSリーダーなどで表示すると、画像がうまく表示されない場合があります。この場合、ページラップの対象となるHTMLファイル内で、<img>タグなどの画像パスを次のように記述することで、RSSリーダーで画像が正常に表示されるようになりますので、お試しください。

"/images/xxxxxxx.gif" 　XOOPSルート直下のimages/ 
"../images/xxxxxxx.gif" 　picoモジュールフロントエンドのimages/ 


【カテゴリー・オプション設定例】
$category_option = '1,2';

このように、data.inc.php の中の変数 $category_option に、カテゴリー番号をカンマ(,)で区切って記入すると、カテゴリー番号1と2の新着投稿のみ表示することができます。

※トップカテゴリー内のコンテンツだけを対象としたい場合は0のみ記入
※空欄なら全カテゴリー表示

【更新履歴】
2.10 2009-06-03
- pico 1.80 以降の「カテゴリーアクセス権限」設定に対応できていなかったのを修正

2.00 2008-09-30
- 掲載期限を過ぎたコンテンツを表示しないよう修正(pico 1.70に対応)

1.90 2007-12-23
- WhatsNewモジュールの「モジュール設定」で、２種類のプラグインを選択できるようにした。

1.80 2007-12-19
- whatsnew 2.40 で、「アクセス権限のないモジュールの表示」を設定している場合、ゲストでもユーザーと同一の閲覧権限を持てるように修正

1.70 2007-12-12
- 全文閲覧権限が与えられていない場合にも本文が表示されてしまう問題を修正

1.60 2007-12-10
- table name を修正、コメント統合時に返信数を表示するよう修正

1.50 2007-06-15
- 未来の作成日時を持つコンテンツは、その時間が来るまで表示されないように修正(pico 1.36 beta に対応)

1.40 2007-05-25
- pico_whatsnew_filter_body()を追加し、本文キャッシュ無効の場合でもフィルターの設定が反映されるよう修正

1.30 2007-05-19
- カテゴリー・オプションを追加

1.20 2007-05-14
- picoのコンテンツの更新時にも新着情報ブロックに表示できるよう修正

1.10 2007-05-13
- PEAR TextWikiルールによる整形が反映されるよう修正

1.00 2007-05-11
- はっぴぃ・りなっくす さんが正式にマージされたのを受けて、バージョンを変更(v 0.40 のプラグインと機能の相違はありません)

0.40 2007-05-08
- pico 1.31 alpha に対応

0.30 2007-05-06
- 閲覧権限のチェックをするよう修正
- 0.20まで pico 1.20以前用と 1.30以降用の２種類のプラグインにしていたのを一本化

0.20 2007-05-05
- 非表示に設定されているpicoのコンテンツが新着情報ブロックに表示されてしまう問題を修正